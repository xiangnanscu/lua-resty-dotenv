使用 lua 和状态机技术写一个输入字符串输出 table 的函数（用于像 npm 包`dotenv-expand`那样解析.env 文件）, 具体要求如下:

1. 输入字符串` foo = bar` 得到`{ foo = 'bar' }`, 等号两边的空格是可选的, 等号左边为 key, 仅限英文字母、数字和下划线. 每一行的开始和结尾的空格会被忽略。
   另外，value 首位多余的空格会被忽略，但中间的空格会被保留，例如输入`SPACE=  a + b = c    # comment`得到`{ foo = 'a + b = c' }`

2. `#`代表注释，它及其后面的字符被忽略，例如

```
foo = bar
x=1 # this is a comment
```

得到`{ foo = 'bar', x = '1' }`；
注释还可以单独成行（直接被忽略），例如：

```
foo = bar
# this is a line comment
x=1 # this is a comment
```

仍然得到`{ foo = 'bar', x = '1' }`；

3. value 可以使用单引号、双引号和反引号这三种字符成对包裹：

```
'"`
```

此时 value 可以包含换行符、空格（不能被忽略）、还可以包含`#`（此时`#`不能解释为注释），比如输入

```
foo1='1
2'
foo2=" 1#1
2"
foo3=`1#1
2`
```

得到: `{ foo1='1\n2', foo2=' 1#1\n2', foo3='1#1\n2'}`

4. 使用`${X}`或`$X`这种形式能够援引其他 Key,其中`${X}`这种形式能够明确变量名的开始和结束部分，`$X`则是向右一直到第一个非 key 字符出现作为结束。例如输入

```
X=1
Y=2
Z=$X+${Y}
```

得到:`{ X='1', Y='2', Z='1+2'}`；
又比如输入：

```
X=1
XY=2
Z=$XY+
```

得到`{X='1',XY='2',Z='2+'}`.

5. 可以不提供 value，此时解析为空字符串，例如输入`EMPTY =`,得到`{ EMPTY = ''}`

大概规则就是这些，另外特别提醒，你需要逐个字符分析，因为如果换行符是出现在成对的`'"字符里面，那么它只能被解析为普通字符。
